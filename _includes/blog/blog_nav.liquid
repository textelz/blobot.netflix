{% assign all_posts = '' | split: '' %}
{% comment %} 먼저 _posts의 모든 파일 포함 (하위 폴더 포함) {% endcomment %}
{% if site.posts and site.posts.size > 0 %}
    {% assign all_posts = site.posts %}
{% endif %}
{% comment %} 그 다음 컬렉션들 추가 {% endcomment %}
{% for collection in site.collections %}
    {% unless collection.label == 'posts' or collection.label == 'data' or collection.label == 'portfolio' %}
        {% assign collection_docs = site[collection.label] %}
        {% if collection_docs and collection_docs.size > 0 %}
            {% if all_posts.size > 0 %}
                {% assign all_posts = all_posts | concat: collection_docs %}
            {% else %}
                {% assign all_posts = collection_docs %}
            {% endif %}
        {% endif %}
    {% endunless %}
{% endfor %}
{% assign all_posts = all_posts | sort: 'date' | reverse %}
{% assign total_posts = all_posts.size %}
{% assign per_page = paginator.per_page | default: site.paginate | default: 5 %}
{% if per_page > 0 %}
    {% assign total_pages = total_posts | divided_by: per_page | plus: 1 %}
{% else %}
    {% assign total_pages = 1 %}
{% endif %}
{% if total_pages > 1 %}
<div class="pagination" data-testid="blog-pagination">
    <div class="previous">
        {% assign prev_page = paginator.page | minus: 1 %}
        {% if prev_page > 0 %}
        {% if prev_page > 1 %}
        <!-- << -->
        <a aria-label="{{ site.data.language.str_previous_page | default: 'Prev' }}" href="{{ '/' | relative_url }}" class="button">
            <span><i class="fas fa-angle-double-left"></i></span>
        </a>
        {% endif %}
        <!-- < previous -->
        <a aria-label="{{ site.data.language.str_previous_page | default: 'Prev' }}" href="{% if prev_page == 1 %}{{ '/' | relative_url }}{% else %}{{ site.paginate_path | relative_url | replace: ':num', prev_page }}{% endif %}" class="button">
            <span><i class="fas fa-chevron-left"></i></span>
            {{ site.data.language.str_previous_page | default: "Prev" }}
        </a>
        {% else %}
        <span style="visibility:hidden" class="button">
            <span><i class="fas fa-chevron-left"></i></span>
            {{ site.data.language.str_previous_page | default: "Prev" }}
        </span>
        {% endif %}
    </div>

    <div class="page_number">
        {{ paginator.page }} / {{ total_pages }}
    </div>

    <div class="next">
        {% assign next_page = paginator.page | plus: 1 %}
        {% if next_page <= total_pages %}
        <!-- next > -->
        <a aria-label="{{ site.data.language.str_next_page | default: 'Next' }}" href="{{ site.paginate_path | relative_url | replace: ':num', next_page }}" class="button">
            {{ site.data.language.str_next_page | default: "Next" }}
            <span><i class="fas fa-chevron-right"></i></span>
        </a>

        {% if next_page < total_pages %}
        <!-- >> -->
        <a aria-label="{{ site.data.language.str_next_page | default: 'Next' }}"
        href="{{ site.paginate_path | relative_url | replace: ':num', total_pages }}" class="button">
            <span><i class="fas fa-angle-double-right"></i></span>
        </a>
        {% endif %}
        {% else %}
        <span style="visibility:hidden" class="button">
            {{ site.data.language.str_next_page | default: "Next" }}
            <span><i class="fas fa-chevron-right"></i></span>
        </span>
        {% endif %}
        
    </div>
</div>
{% endif %}
